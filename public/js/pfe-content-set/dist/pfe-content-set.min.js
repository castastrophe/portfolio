import e from"../../pfelement/dist/pfelement.min.js";import t from"../../pfe-accordion/dist/pfe-accordion.min.js";import i from"../../pfe-tabs/dist/pfe-tabs.min.js";window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){t=t||window;for(var i=0;i<this.length;i++)e.call(t,this[i],i,this)}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),s=1;s<arguments.length;s++){var n=arguments[s];if(null!=n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},writable:!0,configurable:!0})
/*!
 * PatternFly Elements: PfeContentSet 1.3.0
 * @license
 * Copyright 2021 Red Hat, Inc.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
*/;const s={characterData:!0,childList:!0,subtree:!0};class n extends e{static get version(){return"1.3.0"}get html(){return'\n<style>:host{display:block}::slotted(:not(pfe-accordion,pfe-tabs)),::slotted([hidden]),:host([hidden]),[hidden]{display:none!important} /*# sourceMappingURL=pfe-content-set.min.css.map */</style>\n<slot id="lightdom" hidden></slot>\n<slot name="_view" private></slot>'}static get tag(){return"pfe-content-set"}get templateUrl(){return"pfe-content-set.html"}get styleUrl(){return"pfe-content-set.scss"}static get meta(){return{title:"Content set",description:"This element creates a flexible component that renders an accordion or tabset depending on screen size."}}static get pfeType(){return e.pfeType.combo}static get properties(){const e=(e,t)=>{let i=Object.assign({},e);for(const[e,s]of Object.entries(i))s.observer&&delete i[e].observer,s.cascade&&delete i[e].cascade,s.alias||(i[e].cascade=t);return i};let s=e(i.properties,i.tag),n=e(t.properties,t.tag);const r=Object.assign(s,n);return Object.assign(r,{breakpoint:{title:"Custom breakpoint",type:String,observer:"_updateBreakpoint"},align:{type:String,enum:["center"],alias:"tabAlign"},oldAlign:{attr:"pfe-align",alias:"tabAlign"},oldBreakpoint:{type:String,alias:"breakpoint",attr:"pfe-breakpoint"},pfeId:{type:String,attr:"pfe-id",observer:"_copyToId"}})}static get slots(){return{default:{title:"Default",type:"array",namedSlot:!1,items:{$ref:"raw"}}}}get isTab(){let e=this.breakpoint?parseInt(this.breakpoint.replace(/\D/g,"")):700;return this.parentNode?this.parentNode.offsetWidth>e:window.outerWidth>e}get viewAll(){return this.querySelectorAll('[slot="_view"]')}get view(){let e=[...this.viewAll].filter(e=>[i.tag,t.tag].includes(e.tagName.toLowerCase()));return e.length<=0?null:e[0]}get tabs(){return this.querySelector('pfe-tabs[slot="_view"]')}get accordion(){return this.querySelector('pfe-accordion[slot="_view"]')}get hasValidLightDOM(){if(this.hasLightDOM()){let e=this.shadowRoot.querySelector("slot#lightdom"),t=!1;return e.assignedNodes().forEach(e=>{"#text"!==e.nodeName&&(this._isHeader(e)||this._isPanel(e))&&(t=!0)}),t}return!1}constructor(){super(n),this.isIE11=!!window.MSInputMethodContext&&!!document.documentMode,this.build=this.build.bind(this),this._mutationHandler=this._mutationHandler.bind(this),this._resizeHandler=this._resizeHandler.bind(this),this._cleanSet=this._cleanSet.bind(this),this._observer=new MutationObserver(this._mutationHandler),window.ResizeObserver&&(this._resizeObserver=new ResizeObserver(this._resizeHandler))}connectedCallback(){super.connectedCallback(),this.id&&(this.id=`${this.id}-container`),this.hasValidLightDOM&&this.build().then(()=>{window.ResizeObserver&&this.parentElement&&this._resizeObserver.observe(this.parentElement)},e=>{this.error(`There was an issue building the component: ${e}`)}),this._observer.observe(this,s)}disconnectedCallback(){super.disconnectedCallback(),this._observer.disconnect(),window.ResizeObserver&&this._resizeObserver.disconnect()}build(){return new Promise((e,s)=>{let n=this.isTab?i.tag:t.tag;if(this.view){if(this.view&&this.view.tagName.toLowerCase()===n)return e(this.view);this.viewAll.forEach(e=>e.remove())}let r=document.createElement(n);return r.setAttribute("slot","_view"),this.id&&(r.id=this.id.replace(/-container$/,"")),this.appendChild(r),this._build().then(()=>e(r))})}_mutationHandler(e){if(this.isIE11||!e)this._build();else for(let t of e)switch(t.type){case"childList":if(t.addedNodes){let e=[...t.addedNodes].filter(e=>!e.hasAttribute("slot"));e.length>0&&this._build(e)}if(t.removedNodes){let e=[...t.removedNodes].filter(e=>!e.hasAttribute("slot"));e.length>0&&this._removeNodes(e)}break;case"characterData":t.target&&t.target.parentNode&&this._updateNode(t.target.parentNode,t.target.textContent)}}_isHeader(e){return e.hasAttribute(`${this.tag}--header`)||e.tagName.match(/H[1-6]/)}_isPanel(e){return e.hasAttribute(`${this.tag}--panel`)}_removeNodes(e){e.forEach(e=>this._removeNode(e)),this.view&&(this.view.hasChildNodes()?this.view.removeAttribute("hidden"):this.view.setAttribute("hidden",""))}_findConnection(e){let t=null;if(!this.view)return t;if("#text"!==e.nodeName&&e.hasAttribute("maps-to")){const i=e.getAttribute("maps-to");if(!i)return t;(t=this.view.querySelector(`#${i}`))||this.warn(`no element could be found with #${i}`)}return t}_removeNode(e){if(!this.view)return;const t=_findConnection(e);t?this.view.removeChild(t):this._build()}_updateNode(e,t){this.view||this.build();const i=_findConnection(e);i?i.textContent=t:this._build()}_buildSets(e,t){e=this._cleanSet(e);let i=document.createDocumentFragment();for(let s=0;s<e.length;s+=2){let n=e[s],r=e[s+1];const o=document.createElement("template");o.innerHTML=t.trim();const a=o.content.cloneNode(!0);n||this.warn(`no element found at position ${s} of the light DOM input.`),r||this.warn(`no element found at position ${s+1} of the light DOM input.`),n&&this._isHeader(n)&&r&&this._isPanel(r)&&[n,r].forEach((e,t)=>{const s=0===t?"header":"panel";let n=a.querySelector(`[content-type="${s}"]`).cloneNode(!0),r=e.id;e.hasAttribute("upgraded")&&r&&(r=r.replace(new RegExp(`--${s}$`),""));const o=r||e.getAttribute("pfe-id")||this.randomId;e.id&&(e.id=`${r}--${s}`),e.setAttribute("upgraded","");const d=e.cloneNode(!0);d.removeAttribute(`${this.tag}--${s}`),n.appendChild(d),e.setAttribute("maps-to",o),n.id=o,i.appendChild(n)})}return i}_cleanSet(e){return[...e].filter(e=>e!==this.view)}_build(e){return new Promise((n,r)=>{if(this._observer.disconnect(),!this.view)return r("No rendering container was found.");const o="pfe-tabs"===this.view.tag?i.contentTemplate:t.contentTemplate;this.view.id||(this.view.id=this.id||this.pfeId||this.randomId);const a=e||(this.children?this.children:null);if(!e&&a&&(this.view.innerHTML=""),a){let e=this._buildSets(a,o);e&&this.view.appendChild(e)}return Promise.all([customElements.whenDefined(i.tag)]).then(()=>{this.isTab&&this.selectedIndex&&(this.view.selectedIndex=this.selectedIndex)}),this._observer.observe(this,s),n()})}_copyToId(){this.id||(this.id=this.pfeId)}_resizeHandler(){this.build()}_updateBreakpoint(){this.build()}}e.create(n);export default n;
//# sourceMappingURL=pfe-content-set.min.js.map

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJwZmUtY29udGVudC1zZXQvZGlzdC9wZmUtY29udGVudC1zZXQubWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBlIGZyb21cIi4uLy4uL3BmZWxlbWVudC9kaXN0L3BmZWxlbWVudC5taW4uanNcIjtpbXBvcnQgdCBmcm9tXCIuLi8uLi9wZmUtYWNjb3JkaW9uL2Rpc3QvcGZlLWFjY29yZGlvbi5taW4uanNcIjtpbXBvcnQgaSBmcm9tXCIuLi8uLi9wZmUtdGFicy9kaXN0L3BmZS10YWJzLm1pbi5qc1wiO3dpbmRvdy5Ob2RlTGlzdCYmIU5vZGVMaXN0LnByb3RvdHlwZS5mb3JFYWNoJiYoTm9kZUxpc3QucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24oZSx0KXt0PXR8fHdpbmRvdztmb3IodmFyIGk9MDtpPHRoaXMubGVuZ3RoO2krKyllLmNhbGwodCx0aGlzW2ldLGksdGhpcyl9KSxcImZ1bmN0aW9uXCIhPXR5cGVvZiBPYmplY3QuYXNzaWduJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoT2JqZWN0LFwiYXNzaWduXCIse3ZhbHVlOmZ1bmN0aW9uKGUsdCl7aWYobnVsbD09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNvbnZlcnQgdW5kZWZpbmVkIG9yIG51bGwgdG8gb2JqZWN0XCIpO2Zvcih2YXIgaT1PYmplY3QoZSkscz0xO3M8YXJndW1lbnRzLmxlbmd0aDtzKyspe3ZhciBuPWFyZ3VtZW50c1tzXTtpZihudWxsIT1uKWZvcih2YXIgciBpbiBuKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChuLHIpJiYoaVtyXT1uW3JdKX1yZXR1cm4gaX0sd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfSlcbi8qIVxuICogUGF0dGVybkZseSBFbGVtZW50czogUGZlQ29udGVudFNldCAxLjMuMFxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIFJlZCBIYXQsIEluYy5cbiAqIFxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuICogb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxuICogaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xuICogdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxuICogY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG4gKiBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuICogXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuICogYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gKiBcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbiAqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4gKiBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4gKiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuICogT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEVcbiAqIFNPRlRXQVJFLlxuICogXG4qLztjb25zdCBzPXtjaGFyYWN0ZXJEYXRhOiEwLGNoaWxkTGlzdDohMCxzdWJ0cmVlOiEwfTtjbGFzcyBuIGV4dGVuZHMgZXtzdGF0aWMgZ2V0IHZlcnNpb24oKXtyZXR1cm5cIjEuMy4wXCJ9Z2V0IGh0bWwoKXtyZXR1cm4nXFxuPHN0eWxlPjpob3N0e2Rpc3BsYXk6YmxvY2t9OjpzbG90dGVkKDpub3QocGZlLWFjY29yZGlvbixwZmUtdGFicykpLDo6c2xvdHRlZChbaGlkZGVuXSksOmhvc3QoW2hpZGRlbl0pLFtoaWRkZW5de2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9IC8qIyBzb3VyY2VNYXBwaW5nVVJMPXBmZS1jb250ZW50LXNldC5taW4uY3NzLm1hcCAqLzwvc3R5bGU+XFxuPHNsb3QgaWQ9XCJsaWdodGRvbVwiIGhpZGRlbj48L3Nsb3Q+XFxuPHNsb3QgbmFtZT1cIl92aWV3XCIgcHJpdmF0ZT48L3Nsb3Q+J31zdGF0aWMgZ2V0IHRhZygpe3JldHVyblwicGZlLWNvbnRlbnQtc2V0XCJ9Z2V0IHRlbXBsYXRlVXJsKCl7cmV0dXJuXCJwZmUtY29udGVudC1zZXQuaHRtbFwifWdldCBzdHlsZVVybCgpe3JldHVyblwicGZlLWNvbnRlbnQtc2V0LnNjc3NcIn1zdGF0aWMgZ2V0IG1ldGEoKXtyZXR1cm57dGl0bGU6XCJDb250ZW50IHNldFwiLGRlc2NyaXB0aW9uOlwiVGhpcyBlbGVtZW50IGNyZWF0ZXMgYSBmbGV4aWJsZSBjb21wb25lbnQgdGhhdCByZW5kZXJzIGFuIGFjY29yZGlvbiBvciB0YWJzZXQgZGVwZW5kaW5nIG9uIHNjcmVlbiBzaXplLlwifX1zdGF0aWMgZ2V0IHBmZVR5cGUoKXtyZXR1cm4gZS5wZmVUeXBlLmNvbWJvfXN0YXRpYyBnZXQgcHJvcGVydGllcygpe2NvbnN0IGU9KGUsdCk9PntsZXQgaT1PYmplY3QuYXNzaWduKHt9LGUpO2Zvcihjb25zdFtlLHNdb2YgT2JqZWN0LmVudHJpZXMoaSkpcy5vYnNlcnZlciYmZGVsZXRlIGlbZV0ub2JzZXJ2ZXIscy5jYXNjYWRlJiZkZWxldGUgaVtlXS5jYXNjYWRlLHMuYWxpYXN8fChpW2VdLmNhc2NhZGU9dCk7cmV0dXJuIGl9O2xldCBzPWUoaS5wcm9wZXJ0aWVzLGkudGFnKSxuPWUodC5wcm9wZXJ0aWVzLHQudGFnKTtjb25zdCByPU9iamVjdC5hc3NpZ24ocyxuKTtyZXR1cm4gT2JqZWN0LmFzc2lnbihyLHticmVha3BvaW50Ont0aXRsZTpcIkN1c3RvbSBicmVha3BvaW50XCIsdHlwZTpTdHJpbmcsb2JzZXJ2ZXI6XCJfdXBkYXRlQnJlYWtwb2ludFwifSxhbGlnbjp7dHlwZTpTdHJpbmcsZW51bTpbXCJjZW50ZXJcIl0sYWxpYXM6XCJ0YWJBbGlnblwifSxvbGRBbGlnbjp7YXR0cjpcInBmZS1hbGlnblwiLGFsaWFzOlwidGFiQWxpZ25cIn0sb2xkQnJlYWtwb2ludDp7dHlwZTpTdHJpbmcsYWxpYXM6XCJicmVha3BvaW50XCIsYXR0cjpcInBmZS1icmVha3BvaW50XCJ9LHBmZUlkOnt0eXBlOlN0cmluZyxhdHRyOlwicGZlLWlkXCIsb2JzZXJ2ZXI6XCJfY29weVRvSWRcIn19KX1zdGF0aWMgZ2V0IHNsb3RzKCl7cmV0dXJue2RlZmF1bHQ6e3RpdGxlOlwiRGVmYXVsdFwiLHR5cGU6XCJhcnJheVwiLG5hbWVkU2xvdDohMSxpdGVtczp7JHJlZjpcInJhd1wifX19fWdldCBpc1RhYigpe2xldCBlPXRoaXMuYnJlYWtwb2ludD9wYXJzZUludCh0aGlzLmJyZWFrcG9pbnQucmVwbGFjZSgvXFxEL2csXCJcIikpOjcwMDtyZXR1cm4gdGhpcy5wYXJlbnROb2RlP3RoaXMucGFyZW50Tm9kZS5vZmZzZXRXaWR0aD5lOndpbmRvdy5vdXRlcldpZHRoPmV9Z2V0IHZpZXdBbGwoKXtyZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yQWxsKCdbc2xvdD1cIl92aWV3XCJdJyl9Z2V0IHZpZXcoKXtsZXQgZT1bLi4udGhpcy52aWV3QWxsXS5maWx0ZXIoZT0+W2kudGFnLHQudGFnXS5pbmNsdWRlcyhlLnRhZ05hbWUudG9Mb3dlckNhc2UoKSkpO3JldHVybiBlLmxlbmd0aDw9MD9udWxsOmVbMF19Z2V0IHRhYnMoKXtyZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKCdwZmUtdGFic1tzbG90PVwiX3ZpZXdcIl0nKX1nZXQgYWNjb3JkaW9uKCl7cmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcigncGZlLWFjY29yZGlvbltzbG90PVwiX3ZpZXdcIl0nKX1nZXQgaGFzVmFsaWRMaWdodERPTSgpe2lmKHRoaXMuaGFzTGlnaHRET00oKSl7bGV0IGU9dGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoXCJzbG90I2xpZ2h0ZG9tXCIpLHQ9ITE7cmV0dXJuIGUuYXNzaWduZWROb2RlcygpLmZvckVhY2goZT0+e1wiI3RleHRcIiE9PWUubm9kZU5hbWUmJih0aGlzLl9pc0hlYWRlcihlKXx8dGhpcy5faXNQYW5lbChlKSkmJih0PSEwKX0pLHR9cmV0dXJuITF9Y29uc3RydWN0b3IoKXtzdXBlcihuKSx0aGlzLmlzSUUxMT0hIXdpbmRvdy5NU0lucHV0TWV0aG9kQ29udGV4dCYmISFkb2N1bWVudC5kb2N1bWVudE1vZGUsdGhpcy5idWlsZD10aGlzLmJ1aWxkLmJpbmQodGhpcyksdGhpcy5fbXV0YXRpb25IYW5kbGVyPXRoaXMuX211dGF0aW9uSGFuZGxlci5iaW5kKHRoaXMpLHRoaXMuX3Jlc2l6ZUhhbmRsZXI9dGhpcy5fcmVzaXplSGFuZGxlci5iaW5kKHRoaXMpLHRoaXMuX2NsZWFuU2V0PXRoaXMuX2NsZWFuU2V0LmJpbmQodGhpcyksdGhpcy5fb2JzZXJ2ZXI9bmV3IE11dGF0aW9uT2JzZXJ2ZXIodGhpcy5fbXV0YXRpb25IYW5kbGVyKSx3aW5kb3cuUmVzaXplT2JzZXJ2ZXImJih0aGlzLl9yZXNpemVPYnNlcnZlcj1uZXcgUmVzaXplT2JzZXJ2ZXIodGhpcy5fcmVzaXplSGFuZGxlcikpfWNvbm5lY3RlZENhbGxiYWNrKCl7c3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKSx0aGlzLmlkJiYodGhpcy5pZD1gJHt0aGlzLmlkfS1jb250YWluZXJgKSx0aGlzLmhhc1ZhbGlkTGlnaHRET00mJnRoaXMuYnVpbGQoKS50aGVuKCgpPT57d2luZG93LlJlc2l6ZU9ic2VydmVyJiZ0aGlzLnBhcmVudEVsZW1lbnQmJnRoaXMuX3Jlc2l6ZU9ic2VydmVyLm9ic2VydmUodGhpcy5wYXJlbnRFbGVtZW50KX0sZT0+e3RoaXMuZXJyb3IoYFRoZXJlIHdhcyBhbiBpc3N1ZSBidWlsZGluZyB0aGUgY29tcG9uZW50OiAke2V9YCl9KSx0aGlzLl9vYnNlcnZlci5vYnNlcnZlKHRoaXMscyl9ZGlzY29ubmVjdGVkQ2FsbGJhY2soKXtzdXBlci5kaXNjb25uZWN0ZWRDYWxsYmFjaygpLHRoaXMuX29ic2VydmVyLmRpc2Nvbm5lY3QoKSx3aW5kb3cuUmVzaXplT2JzZXJ2ZXImJnRoaXMuX3Jlc2l6ZU9ic2VydmVyLmRpc2Nvbm5lY3QoKX1idWlsZCgpe3JldHVybiBuZXcgUHJvbWlzZSgoZSxzKT0+e2xldCBuPXRoaXMuaXNUYWI/aS50YWc6dC50YWc7aWYodGhpcy52aWV3KXtpZih0aGlzLnZpZXcmJnRoaXMudmlldy50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PT1uKXJldHVybiBlKHRoaXMudmlldyk7dGhpcy52aWV3QWxsLmZvckVhY2goZT0+ZS5yZW1vdmUoKSl9bGV0IHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChuKTtyZXR1cm4gci5zZXRBdHRyaWJ1dGUoXCJzbG90XCIsXCJfdmlld1wiKSx0aGlzLmlkJiYoci5pZD10aGlzLmlkLnJlcGxhY2UoLy1jb250YWluZXIkLyxcIlwiKSksdGhpcy5hcHBlbmRDaGlsZChyKSx0aGlzLl9idWlsZCgpLnRoZW4oKCk9PmUocikpfSl9X211dGF0aW9uSGFuZGxlcihlKXtpZih0aGlzLmlzSUUxMXx8IWUpdGhpcy5fYnVpbGQoKTtlbHNlIGZvcihsZXQgdCBvZiBlKXN3aXRjaCh0LnR5cGUpe2Nhc2VcImNoaWxkTGlzdFwiOmlmKHQuYWRkZWROb2Rlcyl7bGV0IGU9Wy4uLnQuYWRkZWROb2Rlc10uZmlsdGVyKGU9PiFlLmhhc0F0dHJpYnV0ZShcInNsb3RcIikpO2UubGVuZ3RoPjAmJnRoaXMuX2J1aWxkKGUpfWlmKHQucmVtb3ZlZE5vZGVzKXtsZXQgZT1bLi4udC5yZW1vdmVkTm9kZXNdLmZpbHRlcihlPT4hZS5oYXNBdHRyaWJ1dGUoXCJzbG90XCIpKTtlLmxlbmd0aD4wJiZ0aGlzLl9yZW1vdmVOb2RlcyhlKX1icmVhaztjYXNlXCJjaGFyYWN0ZXJEYXRhXCI6dC50YXJnZXQmJnQudGFyZ2V0LnBhcmVudE5vZGUmJnRoaXMuX3VwZGF0ZU5vZGUodC50YXJnZXQucGFyZW50Tm9kZSx0LnRhcmdldC50ZXh0Q29udGVudCl9fV9pc0hlYWRlcihlKXtyZXR1cm4gZS5oYXNBdHRyaWJ1dGUoYCR7dGhpcy50YWd9LS1oZWFkZXJgKXx8ZS50YWdOYW1lLm1hdGNoKC9IWzEtNl0vKX1faXNQYW5lbChlKXtyZXR1cm4gZS5oYXNBdHRyaWJ1dGUoYCR7dGhpcy50YWd9LS1wYW5lbGApfV9yZW1vdmVOb2RlcyhlKXtlLmZvckVhY2goZT0+dGhpcy5fcmVtb3ZlTm9kZShlKSksdGhpcy52aWV3JiYodGhpcy52aWV3Lmhhc0NoaWxkTm9kZXMoKT90aGlzLnZpZXcucmVtb3ZlQXR0cmlidXRlKFwiaGlkZGVuXCIpOnRoaXMudmlldy5zZXRBdHRyaWJ1dGUoXCJoaWRkZW5cIixcIlwiKSl9X2ZpbmRDb25uZWN0aW9uKGUpe2xldCB0PW51bGw7aWYoIXRoaXMudmlldylyZXR1cm4gdDtpZihcIiN0ZXh0XCIhPT1lLm5vZGVOYW1lJiZlLmhhc0F0dHJpYnV0ZShcIm1hcHMtdG9cIikpe2NvbnN0IGk9ZS5nZXRBdHRyaWJ1dGUoXCJtYXBzLXRvXCIpO2lmKCFpKXJldHVybiB0Oyh0PXRoaXMudmlldy5xdWVyeVNlbGVjdG9yKGAjJHtpfWApKXx8dGhpcy53YXJuKGBubyBlbGVtZW50IGNvdWxkIGJlIGZvdW5kIHdpdGggIyR7aX1gKX1yZXR1cm4gdH1fcmVtb3ZlTm9kZShlKXtpZighdGhpcy52aWV3KXJldHVybjtjb25zdCB0PV9maW5kQ29ubmVjdGlvbihlKTt0P3RoaXMudmlldy5yZW1vdmVDaGlsZCh0KTp0aGlzLl9idWlsZCgpfV91cGRhdGVOb2RlKGUsdCl7dGhpcy52aWV3fHx0aGlzLmJ1aWxkKCk7Y29uc3QgaT1fZmluZENvbm5lY3Rpb24oZSk7aT9pLnRleHRDb250ZW50PXQ6dGhpcy5fYnVpbGQoKX1fYnVpbGRTZXRzKGUsdCl7ZT10aGlzLl9jbGVhblNldChlKTtsZXQgaT1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7Zm9yKGxldCBzPTA7czxlLmxlbmd0aDtzKz0yKXtsZXQgbj1lW3NdLHI9ZVtzKzFdO2NvbnN0IG89ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpO28uaW5uZXJIVE1MPXQudHJpbSgpO2NvbnN0IGE9by5jb250ZW50LmNsb25lTm9kZSghMCk7bnx8dGhpcy53YXJuKGBubyBlbGVtZW50IGZvdW5kIGF0IHBvc2l0aW9uICR7c30gb2YgdGhlIGxpZ2h0IERPTSBpbnB1dC5gKSxyfHx0aGlzLndhcm4oYG5vIGVsZW1lbnQgZm91bmQgYXQgcG9zaXRpb24gJHtzKzF9IG9mIHRoZSBsaWdodCBET00gaW5wdXQuYCksbiYmdGhpcy5faXNIZWFkZXIobikmJnImJnRoaXMuX2lzUGFuZWwocikmJltuLHJdLmZvckVhY2goKGUsdCk9Pntjb25zdCBzPTA9PT10P1wiaGVhZGVyXCI6XCJwYW5lbFwiO2xldCBuPWEucXVlcnlTZWxlY3RvcihgW2NvbnRlbnQtdHlwZT1cIiR7c31cIl1gKS5jbG9uZU5vZGUoITApLHI9ZS5pZDtlLmhhc0F0dHJpYnV0ZShcInVwZ3JhZGVkXCIpJiZyJiYocj1yLnJlcGxhY2UobmV3IFJlZ0V4cChgLS0ke3N9JGApLFwiXCIpKTtjb25zdCBvPXJ8fGUuZ2V0QXR0cmlidXRlKFwicGZlLWlkXCIpfHx0aGlzLnJhbmRvbUlkO2UuaWQmJihlLmlkPWAke3J9LS0ke3N9YCksZS5zZXRBdHRyaWJ1dGUoXCJ1cGdyYWRlZFwiLFwiXCIpO2NvbnN0IGQ9ZS5jbG9uZU5vZGUoITApO2QucmVtb3ZlQXR0cmlidXRlKGAke3RoaXMudGFnfS0tJHtzfWApLG4uYXBwZW5kQ2hpbGQoZCksZS5zZXRBdHRyaWJ1dGUoXCJtYXBzLXRvXCIsbyksbi5pZD1vLGkuYXBwZW5kQ2hpbGQobil9KX1yZXR1cm4gaX1fY2xlYW5TZXQoZSl7cmV0dXJuWy4uLmVdLmZpbHRlcihlPT5lIT09dGhpcy52aWV3KX1fYnVpbGQoZSl7cmV0dXJuIG5ldyBQcm9taXNlKChuLHIpPT57aWYodGhpcy5fb2JzZXJ2ZXIuZGlzY29ubmVjdCgpLCF0aGlzLnZpZXcpcmV0dXJuIHIoXCJObyByZW5kZXJpbmcgY29udGFpbmVyIHdhcyBmb3VuZC5cIik7Y29uc3Qgbz1cInBmZS10YWJzXCI9PT10aGlzLnZpZXcudGFnP2kuY29udGVudFRlbXBsYXRlOnQuY29udGVudFRlbXBsYXRlO3RoaXMudmlldy5pZHx8KHRoaXMudmlldy5pZD10aGlzLmlkfHx0aGlzLnBmZUlkfHx0aGlzLnJhbmRvbUlkKTtjb25zdCBhPWV8fCh0aGlzLmNoaWxkcmVuP3RoaXMuY2hpbGRyZW46bnVsbCk7aWYoIWUmJmEmJih0aGlzLnZpZXcuaW5uZXJIVE1MPVwiXCIpLGEpe2xldCBlPXRoaXMuX2J1aWxkU2V0cyhhLG8pO2UmJnRoaXMudmlldy5hcHBlbmRDaGlsZChlKX1yZXR1cm4gUHJvbWlzZS5hbGwoW2N1c3RvbUVsZW1lbnRzLndoZW5EZWZpbmVkKGkudGFnKV0pLnRoZW4oKCk9Pnt0aGlzLmlzVGFiJiZ0aGlzLnNlbGVjdGVkSW5kZXgmJih0aGlzLnZpZXcuc2VsZWN0ZWRJbmRleD10aGlzLnNlbGVjdGVkSW5kZXgpfSksdGhpcy5fb2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLHMpLG4oKX0pfV9jb3B5VG9JZCgpe3RoaXMuaWR8fCh0aGlzLmlkPXRoaXMucGZlSWQpfV9yZXNpemVIYW5kbGVyKCl7dGhpcy5idWlsZCgpfV91cGRhdGVCcmVha3BvaW50KCl7dGhpcy5idWlsZCgpfX1lLmNyZWF0ZShuKTtleHBvcnQgZGVmYXVsdCBuO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGZlLWNvbnRlbnQtc2V0Lm1pbi5qcy5tYXBcbiJdLCJmaWxlIjoicGZlLWNvbnRlbnQtc2V0L2Rpc3QvcGZlLWNvbnRlbnQtc2V0Lm1pbi5qcyJ9
